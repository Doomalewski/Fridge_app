@model Fridge_app.Models.ViewModels.MyKitchenViewModel

@{
    ViewData["Title"] = "Moja kuchnia";
}

<link rel="stylesheet" href="~/css/home.css" />
<link rel="stylesheet" href="~/css/mykitchen-mymeals.css" />

<div class="home-wrapper">
    <div class="home-header">
        <div class="welcome-box">
            <div class="welcome-icon">
                <i class="bi bi-tools"></i>
            </div>
            <div>
                <h1 class="welcome-title">Moja kuchnia</h1>
                <p class="welcome-subtitle">Zarz¹dzaj narzêdziami kuchennymi i rozwijaj swoje umiejêtnoœci</p>
            </div>
        </div>
        <div class="header-actions">
            <a href="javascript:history.back()" class="back-link">
                <i class="bi bi-arrow-left"></i> Powrót
            </a>
        </div>
    </div>

    <div class="dashboard-grid">
        <!-- Sekcja: Twoje narzêdzia -->
        <div class="dashboard-card dashboard-card-meal animate">
   <div class="card-icon bg-success-light">
    <i class="bi bi-check-circle"></i>
</div>
    <div class="card-content">
        <h3>Twoje narzêdzia</h3>
         <p class="text-muted mb-3">Narzêdzia w Twojej kuchni</p>
   
   @if (Model.UserTools?.Any() == true)
     {
     <div class="tools-list">
 @foreach (var tool in Model.UserTools)
   {
 <div class="tool-item">
         <span class="tool-name">@tool.Name</span>
     <form asp-action="RemoveTool" method="post" class="tool-remove">
          <input type="hidden" name="toolId" value="@tool.Id" />
     <button type="submit" class="btn btn-sm btn-outline-danger" 
title="Usuñ narzêdzie"
         onclick="return confirm('Czy na pewno chcesz usun¹æ to narzêdzie?')">
     <i class="bi bi-trash"></i>
   </button>
        </form>
       </div>
     }
         </div>
     }
     else
         {
 <div class="text-center text-muted">
            <small>Nie masz jeszcze narzêdzi. Dodaj je poni¿ej!</small>
 </div>
     }
      </div>
      <div class="stat-badge">
   <strong>@Model.UserTools?.Count</strong>
  <small>narzêdzi</small>
 </div>
        </div>

    <!-- Sekcja: Dostêpne narzêdzia -->
        <div class="dashboard-card dashboard-card-meal animate">
          <div class="card-icon bg-primary-light">
       <i class="bi bi-plus-circle"></i>
     </div>
         <div class="card-content">
 <h3>Dostêpne narzêdzia</h3>
        <p class="text-muted mb-3">Dodaj nowe narzêdzia</p>
  
  @if (Model.ToolsNotInKitchen?.Any() == true)
       {
        <div class="tools-list">
   @foreach (var tool in Model.ToolsNotInKitchen)
     {
  <div class="tool-item">
   <span class="tool-name">@tool.Name</span>
         <form asp-action="AddTool" method="post" class="tool-add">
   <input type="hidden" name="toolId" value="@tool.Id" />
    <button type="submit" class="btn btn-sm btn-outline-success" 
     title="Dodaj narzêdzie">
     <i class="bi bi-plus"></i>
   </button>
     </form>
 </div>
    }
   </div>
     }
          else
 {
  <div class="text-center text-muted">
    <small>Masz wszystkie dostêpne narzêdzia! ??</small>
        </div>
    }
 </div>
  <div class="stat-badge">
  <strong>@Model.AvailableTools?.Count</strong>
      <small>dostêpne</small>
       </div>
        </div>

     <!-- Sekcja: Kompletnoœæ kuchni -->
        <div class="dashboard-card dashboard-card-meal animate">
    <div class="card-icon bg-info-light">
      <i class="bi bi-pie-chart"></i>
   </div>
     <div class="card-content">
    <h3>Kompletnoœæ kuchni</h3>
 <p class="text-muted mb-3">Twój postêp</p>
  
     <div class="progress-section">
           @{
     var completeness = Model.AvailableTools?.Count > 0 
   ? Math.Round((double)Model.UserTools?.Count / Model.AvailableTools.Count * 100, 1) 
 : 0;
   }
        <div class="progress-bar-container">
    <div class="progress-bar-fill" style="width: @(completeness)%"></div>
        </div>
   <p class="progress-text">@completeness%</p>
      </div>
   </div>
 <div class="stat-badge">
     <strong>@(Model.UserTools?.Count ?? 0)/@(Model.AvailableTools?.Count ?? 0)</strong>
        <small>narzêdzi</small>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", () => {
     const cards = document.querySelectorAll('.dashboard-card.animate');
  cards.forEach((card, index) => {
    setTimeout(() => {
  card.classList.add('visible');
       }, index * 150);
       });
   });
    </script>
}
